<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LabelCreator"
        xmlns:helpers="clr-namespace:LabelCreator.Helpers"
        xmlns:ViewModel="clr-namespace:LabelCreator.ViewModel" xmlns:System="clr-namespace:System;assembly=mscorlib" x:Class="LabelCreator.MainWindow"
        mc:Ignorable="d"
        Title="MainWindow"
        Width="740" 
        MinWidth="300"
        Height="470"
        MinHeight="200"
        >
    <!--<Window.Resources>
        <ViewModel:MainViewModel />
    </Window.Resources>-->

    <Window.DataContext>
        <ViewModel:MainViewModel CanvasHeight="270" CanvasWidth="500" x:Name="MainVM"/>
    </Window.DataContext>

    <Window.CommandBindings>
        <CommandBinding Command="helpers:CommandHandler.NewCanvas" 
                        Executed="Command_NewCanvas"/>

        <CommandBinding Command="helpers:CommandHandler.Exit" 
                        Executed="Command_Exit"/>
    </Window.CommandBindings>

    <Grid>
        <Grid.RowDefinitions>
            <!--Menu Plik-->
            <RowDefinition Height="auto"/>
            <!--Pasek Toolbox-->
            <RowDefinition Height="22"/>
            <!--Kontent-->
            <RowDefinition Height="*"/>
            <!--Canvas zoom-->
            <RowDefinition Height="48"/>
            <!--Status bar-->
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="180"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Menu Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
            <MenuItem Header="Plik">
                <MenuItem Header="Nowa etykieta" Command="helpers:CommandHandler.NewCanvas"/>
                <Separator/>
                <MenuItem Header="Zapisz" Command="helpers:CommandHandler.FileSave"/>
                <MenuItem Header="Otwórz" Command="helpers:CommandHandler.FileOpen"/>
                <Separator/>
                <MenuItem Header="Zamknij" Command="helpers:CommandHandler.Exit"/>
            </MenuItem>
            <MenuItem Header="Program"/>
        </Menu>

        <ToolBar Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Padding="0" Background="#FFF3F3F3">
            <Button Height="20" Click="Button_Click" Content="Tekst"/>
            <Button Height="20" Click="Button_Click" Content="Obraz"/>
            <Button Height="20" Click="Button_Click" Content="Kod kreskowy"/>
            <Button Height="20" Click="ButtonMarginesy_Click" Content="Marginesy"/>
        </ToolBar>

        <ScrollViewer Grid.Row="2" Grid.Column="0" Grid.RowSpan="2" Margin="0" VerticalScrollBarVisibility="Auto">
            <GroupBox  Header="Komponenty">
                <TreeView BorderBrush="{x:Null}">
                    <TreeViewItem Header="TreeViewItem" IsExpanded="True">
                        <TreeViewItem Header="TreeViewItem" HorizontalAlignment="Left" />
                    </TreeViewItem>
                </TreeView>
            </GroupBox>
        </ScrollViewer>

        <ScrollViewer Grid.Row="2" Grid.Column="1" Margin="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Background="#FFEAEAEA">
            <GroupBox Header="Obszar roboczy" Padding="10">
                <!--<helpers:FunkyBorder BorderBrush="Red" PreviewMouseLeftButtonDown="MouseLeftButtonDown" PreviewMouseLeftButtonUp="PreviewMouseLeftButtonUp">-->
                <Canvas x:Name="MainCanvas" Height="{Binding CanvasHeight}" Width="{Binding CanvasWidth}" HorizontalAlignment="Left" VerticalAlignment="Top" MouseWheel="DesigningCanvas_MouseWheel" Background="White" Margin="2">
                    <Canvas.LayoutTransform>
                        <ScaleTransform x:Name="CanvasScaleTransform"/>
                    </Canvas.LayoutTransform>
                    <Label Name="MarginT" Width="{Binding MarginWidth}" Height="2" BorderBrush="Red" BorderThickness="3" Canvas.Left="-10" Canvas.Top="0" Cursor="SizeNS" PreviewMouseLeftButtonDown="MouseLeftButtonDown" PreviewMouseLeftButtonUp="PreviewMouseLeftButtonUp"/>
                    <Label Name="MarginB" Width="{Binding MarginWidth}" Height="2" BorderBrush="Red" BorderThickness="3" Canvas.Left="-10" Canvas.Top="{Binding CanvasHeight}" Cursor="SizeNS" PreviewMouseLeftButtonDown="MouseLeftButtonDown" PreviewMouseLeftButtonUp="PreviewMouseLeftButtonUp"/>
                    <Label Name="MarginL" Width="2" Height="{Binding MarginHeight}" BorderBrush="Red" BorderThickness="3" Canvas.Left="0" Canvas.Top="-10" Cursor="SizeWE" PreviewMouseLeftButtonDown="MouseLeftButtonDown" PreviewMouseLeftButtonUp="PreviewMouseLeftButtonUp"/>
                    <Label Name="MarginR" Width="2" Height="{Binding MarginHeight}" BorderBrush="Red" BorderThickness="3" Canvas.Left="{Binding CanvasWidth}" Canvas.Top="-10" Cursor="SizeWE" PreviewMouseLeftButtonDown="MouseLeftButtonDown" PreviewMouseLeftButtonUp="PreviewMouseLeftButtonUp"/>
                </Canvas>
                <!--</helpers:FunkyBorder>-->
            </GroupBox>
        </ScrollViewer>

        <GroupBox Grid.Row="3" Grid.Column="1" Header="Zoom">
            <StackPanel Orientation="Horizontal">
                <Slider x:Name="SliderCanvasZoom" Width="200" Value="1" Minimum="0.2" Maximum="3" TickFrequency="0.1" TickPlacement="BottomRight" ValueChanged="SliderCanvasZoom_ValueChanged" AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="2"/>
                <Button Content="1:1" Width="50" Margin="2" Click="Button_ChangeCanvasZoom" Tag="Default"/>
                <Button Content="+" Width="30" Margin="2" Click="Button_ChangeCanvasZoom" Tag="Plus"/>
                <Button Content="-" Width="30" Margin="2" Click="Button_ChangeCanvasZoom" Tag="Minus"/>
            </StackPanel>
        </GroupBox>


        <StatusBar Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2">
            <System:String>Status bar</System:String>
        </StatusBar>
    </Grid>
</Window>
